resources:
- repo: self
queue:
  name: Hosted VS2017
  demands: npm

steps:
- task: Npm@1
  displayName: 'NPM Install'
  inputs:
    verbose: false

  enabled: false

- task: Npm@1
  displayName: 'NPM NG Lint'
  inputs:
    command: custom

    verbose: false

    customCommand: 'run ng lint'

  enabled: false

- task: Npm@1
  displayName: 'NPM NG Unit Tests'
  inputs:
    command: custom

    verbose: false

    customCommand: 'run unit-test-lib'

  enabled: false

- task: Npm@1
  displayName: 'npm custom'
  inputs:
    command: custom

    workingDir: 'projects/drmueller/ng-base-directives'

    verbose: false

    customCommand: 'version $(Build.BuildNumber)'


- task: Npm@1
  displayName: 'npm publish'
  inputs:
    command: publish

    workingDir: 'projects/drmueller/ng-base-directives'

    verbose: false

    publishEndpoint: 'NPM-DrMueller'


- powershell: ./scripts/UpdatePackageVersion.ps1
  arguments: '-buildVersion $(Build.BuildNumber)'

  displayName: 'PS Update Package Version'
  enabled: false

- powershell: ./scripts/BuildAndPack.ps1
  displayName: 'PS Build and Pack'
  enabled: false

- task: Npm@1
  displayName: 'npm custom'
  inputs:
    command: custom

    verbose: false

    customCommand: 'publish export.tgz --access public'

  enabled: false

